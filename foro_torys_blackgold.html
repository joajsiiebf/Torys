<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Foro de Torys</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;}
html, body{width:100%; height:100%; font-family:'Arial',sans-serif; background:#000; display:flex; justify-content:center; padding-top:20px; overflow-x:hidden;}

body::before {
  content:'';
  position:fixed;
  top:0; left:0; width:100%; height:100%;
  background: radial-gradient(circle at center, #FFD700 0%, #000 80%);
  z-index:-2;
}

.particles {
  position:fixed; top:0; left:0; width:100%; height:100%; z-index:-1; pointer-events:none;
}

.container{
  width:90%; max-width:800px;
  display:flex; flex-direction:column;
  gap:20px;
}

/* Cabecera */
header{
  text-align:center;
  margin-bottom:10px;
}
header h1{
  color:#FFD700;
  font-size:2rem;
  text-shadow: 0 0 15px #FFD700, 0 0 25px #FFD700;
}
header p{
  color:#FFD700;
  font-size:1rem;
  opacity:0.8;
}

/* Formulario Tory */
#toryForm{
  background: rgba(255,255,255,0.05);
  backdrop-filter: blur(15px) saturate(200%);
  border: 1px solid rgba(255,215,0,0.2);
  border-radius:20px;
  box-shadow: inset 0 0 15px rgba(255,215,0,0.3),0 0 25px rgba(255,215,0,0.4);
  padding:15px;
  display:flex; flex-direction:column;
}
#toryForm input[type=text]{padding:10px; border-radius:6px; border:none; margin-bottom:10px; font-size:1rem;}
#toryForm input[type=file]{margin-bottom:10px;}
#toryForm button{
  padding:10px; border:none; border-radius:6px;
  background: linear-gradient(90deg, #FFD700, #FFA500);
  color:#000; font-weight:bold; cursor:pointer; transition: transform 0.2s, box-shadow 0.2s;
}
#toryForm button:hover{
  transform:scale(1.05);
  box-shadow:0 0 20px #FFD700;
}

/* Feed Torys */
#toryFeedContainer{
  display:flex; flex-direction:column;
}
#toryFeedTitle{
  color:#FFD700; font-size:1.5rem; font-weight:bold; margin-bottom:10px;
  text-shadow: 0 0 15px #FFD700;
}
#toryFeed{
  display:flex; flex-direction:column; gap:15px;
  max-height:70vh; overflow-y:auto;
  scrollbar-width:thin;
  scrollbar-color:#FFD700 rgba(255,255,255,0.1);
}
#toryFeed::-webkit-scrollbar{
  width:8px;
}
#toryFeed::-webkit-scrollbar-track{
  background: rgba(255,255,255,0.1);
  border-radius:4px;
}
#toryFeed::-webkit-scrollbar-thumb{
  background: #FFD700;
  border-radius:4px;
}
.toryCard{
  background: rgba(255,255,255,0.05);
  backdrop-filter: blur(15px) saturate(200%);
  border:1px solid rgba(255,215,0,0.2);
  border-radius:15px;
  padding:15px;
  box-shadow:0 0 15px #FFD700, inset 0 0 10px #FFD700;
  animation:fadeIn 0.5s ease;
  transition: transform 0.2s, box-shadow 0.2s;
}
.toryCard:hover{
  transform:translateY(-3px);
  box-shadow:0 0 30px #FFD700, inset 0 0 15px #FFD700;
}
.toryCard img{max-width:100%; margin-top:10px; border-radius:8px;}
.toryCard .timestamp{
  color:#FFD700; font-size:0.75rem; opacity:0.7; margin-bottom:5px;
}
.toryActions{display:flex; justify-content:flex-start; gap:10px; margin-top:10px;}
.toryActions button{
  padding:5px 10px; border:none; border-radius:6px;
  background: rgba(255,215,0,0.2); color:#FFD700;
  cursor:pointer; font-weight:bold; transition:0.2s, box-shadow 0.2s;
}
.toryActions button:hover{
  background: rgba(255,215,0,0.4);
  box-shadow:0 0 15px #FFD700;
}
@keyframes fadeIn{from{opacity:0; transform:translateY(10px);} to{opacity:1; transform:translateY(0);}}

.placeholder{
  color:#FFD700; opacity:0.5; font-style:italic; text-align:center; margin-top:20px;
  animation: pulse 1.5s infinite;
}
@keyframes pulse{0%,100%{opacity:0.5;}50%{opacity:1;}}

#scrollTopBtn {
  position:fixed; bottom:20px; right:20px; padding:10px; border:none;
  border-radius:50%; background: linear-gradient(90deg, #FFD700, #FFA500);
  color:#000; font-weight:bold; cursor:pointer; box-shadow:0 0 15px #FFD700; display:block;
  z-index:10;
}
#scrollTopBtn:hover{box-shadow:0 0 25px #FFD700;}

@media(max-width:768px){.container{width:95%;}}
</style>
</head>
<body>
<canvas class="particles"></canvas>
<div class="container">
  <header>
    <h1>ðŸ’¬ Foro de Torys</h1>
    <p>Comparte, comenta y vota tus Torys favoritos</p>
  </header>

  <form id="toryForm">
    <input id="toryInput" type="text" placeholder="Escribe tu Tory..." autocomplete="off"/>
    <input id="toryImg" type="file" accept="image/*"/>
    <button type="submit">Publicar Tory</button>
  </form>

  <div id="toryFeedContainer">
    <div id="toryFeedTitle">Torys Recientes</div>
    <div id="toryFeed">
      <div class="placeholder">No hay Torys aÃºn, sÃ© el primero en publicar ðŸ’¬</div>
    </div>
  </div>
</div>
<button id="scrollTopBtn">â†‘</button>

<script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-database.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-storage.js"></script>
<script>
const canvas=document.querySelector('.particles');
const ctx=canvas.getContext('2d');
let particles=[];
function resizeCanvas(){canvas.width=window.innerWidth; canvas.height=window.innerHeight;}
window.addEventListener('resize',resizeCanvas); resizeCanvas();
for(let i=0;i<200;i++) particles.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height,radius:Math.random()*3+1.5,speed:Math.random()*1+0.5});
function animateParticles(){
 ctx.clearRect(0,0,canvas.width,canvas.height);
 particles.forEach(p=>{
   ctx.beginPath(); ctx.arc(p.x,p.y,p.radius,0,Math.PI*2);
   ctx.fillStyle='rgba(255,215,0,0.7)'; ctx.fill();
   p.y-=p.speed; if(p.y<0)p.y=canvas.height;
 });
 requestAnimationFrame(animateParticles);
}
animateParticles();

const scrollBtn=document.getElementById('scrollTopBtn');
scrollBtn.style.display='block';
scrollBtn.addEventListener('click',()=>{ window.scrollTo({top:0,behavior:'smooth'}); });

const firebaseConfig={apiKey:"TU_API_KEY",authDomain:"TU_AUTH_DOMAIN",databaseURL:"https://TU_PROYECTO.firebaseio.com",projectId:"TU_PROYECTO",storageBucket:"TU_PROYECTO.appspot.com",messagingSenderId:"TU_SENDER_ID",appId:"TU_APP_ID"};
firebase.initializeApp(firebaseConfig);
const db=firebase.database();
const storage=firebase.storage();
const toryFeed=document.getElementById('toryFeed');
const toryForm=document.getElementById('toryForm');
const toryInput=document.getElementById('toryInput');
const toryImg=document.getElementById('toryImg');
function renderTory(id,data){
 if(document.querySelector('.placeholder')) document.querySelector('.placeholder').remove();
 const div=document.createElement('div'); div.className='toryCard'; div.dataset.id=id;
 const date=new Date(data.timestamp||Date.now()); const timeStr=date.toLocaleString();
 div.innerHTML=`<div class='timestamp'>${timeStr}</div><div>${data.text}</div>`;
 if(data.imgUrl){const img=document.createElement('img'); img.src=data.imgUrl; div.appendChild(img);}
 const actions=document.createElement('div'); actions.className='toryActions';
 const likeBtn=document.createElement('button'); likeBtn.textContent=`ðŸ‘ ${data.likes||0}`;
 const dislikeBtn=document.createElement('button'); dislikeBtn.textContent=`ðŸ‘Ž ${data.dislikes||0}`;
 likeBtn.addEventListener('click',()=>{ db.ref('torys/'+id+'/likes').transaction(c=>(c||0)+1); });
 dislikeBtn.addEventListener('click',()=>{ db.ref('torys/'+id+'/dislikes').transaction(c=>(c||0)+1); });
 actions.appendChild(likeBtn); actions.appendChild(dislikeBtn); div.appendChild(actions);
 toryFeed.prepend(div);
}
db.ref('torys').on('child_added', snapshot=>{ renderTory(snapshot.key,snapshot.val()); });
db.ref('torys').on('child_changed', snapshot=>{ const div=document.querySelector(`.toryCard[data-id='${snapshot.key}']`); if(div){const actions=div.querySelector('.toryActions'); actions.children[0].textContent=`ðŸ‘ ${snapshot.val().likes||0}`; actions.children[1].textContent=`ðŸ‘Ž ${snapshot.val().dislikes||0}`;} });
toryForm.addEventListener('submit',e=>{ e.preventDefault(); const text=toryInput.value.trim(); const file=toryImg.files[0]; if(!text&&!file)return; if(file){const storageRef=storage.ref('images/'+Date.now()+'_'+file.name); storageRef.put(file).then(s=>{ s.ref.getDownloadURL().then(url=>{ db.ref('torys').push({text:text,imgUrl:url,likes:0,dislikes:0,timestamp:Date.now()}); }); }); }else{ db.ref('torys').push({text:text,likes:0,dislikes:0,timestamp:Date.now()}); } toryInput.value=''; toryImg.value=''; });
</script>
</body>
</html>
